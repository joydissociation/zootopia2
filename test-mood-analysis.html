<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¿ƒæƒ…åˆ†ææµ‹è¯•</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="app">
        <h1>ğŸŒˆ å¿ƒæƒ…åˆ†ææµ‹è¯•</h1>
        
        <div class="test-controls" style="margin: 20px 0; padding: 20px; background: #f0f8ff; border: 3px solid #4169e1;">
            <h3>æµ‹è¯•ç”¨ä¾‹</h3>
            <p>ç‚¹å‡»ä¸‹é¢çš„æŒ‰é’®æ¥æµ‹è¯•ä¸åŒçš„å¿ƒæƒ…æè¿°ï¼š</p>
            <button class="test-mood-btn" data-mood="æˆ‘ä»Šå¤©å¾ˆå¼€å¿ƒï¼Œé˜³å…‰æ˜åªšçš„æ„Ÿè§‰">ğŸ˜Š å¼€å¿ƒ</button>
            <button class="test-mood-btn" data-mood="æ„Ÿè§‰æœ‰ç‚¹ç´¯ï¼Œå¿ƒæƒ…ä¸€èˆ¬èˆ¬">ğŸ˜ ä¸€èˆ¬</button>
            <button class="test-mood-btn" data-mood="ä»Šå¤©å¾ˆéš¾è¿‡ï¼Œæƒ³å“­">ğŸ˜¢ éš¾è¿‡</button>
            <button class="test-mood-btn" data-mood="æˆ‘å¾ˆç”Ÿæ°”ï¼Œå‹åŠ›å¾ˆå¤§">ğŸ˜¡ æ„¤æ€’</button>
            <button class="test-mood-btn" data-mood="ä»Šå¤©å¿ƒæƒ…ä¸é”™ï¼Œä½†æœ‰ç‚¹å°æ‹…å¿ƒ">ğŸ¤” å¤æ‚</button>
        </div>

        <main class="main-content">
            <section class="tab-content active">
                <h2>å¿ƒæƒ…åˆ†æ</h2>
                
                <!-- å¿ƒæƒ…è¾“å…¥åŒºåŸŸ -->
                <div class="mood-input-section">
                    <div class="mood-input-container">
                        <input type="text" id="mood-description" placeholder="æè¿°ä¸€ä¸‹ä½ ç°åœ¨çš„å¿ƒæƒ…..." maxlength="100">
                        <button id="analyze-mood-btn">ğŸ” åˆ†æå¿ƒæƒ…</button>
                    </div>
                    <div id="mood-analysis-result" class="mood-analysis-result hidden"></div>
                </div>

                <!-- å¤©æ°”å¿ƒæƒ…é€‰æ‹©å™¨ -->
                <div class="weather-selector">
                    <h3>ä»Šæ—¥å¿ƒæƒ…å¤©æ°”</h3>
                    <div class="weather-buttons">
                        <button class="weather-btn" data-weather="sunny">â˜€ï¸ æ™´æœ—</button>
                        <button class="weather-btn" data-weather="cloudy">â˜ï¸ å¤šäº‘</button>
                        <button class="weather-btn" data-weather="rainy">ğŸŒ§ï¸ é›¨å¤©</button>
                        <button class="weather-btn" data-weather="stormy">â›ˆï¸ æš´é£é›¨</button>
                    </div>
                </div>

                <!-- æµ‹è¯•ç»“æœæ˜¾ç¤º -->
                <div class="test-results" style="margin-top: 30px; padding: 20px; background: #f5f5f5; border: 2px solid #999;">
                    <h4>æµ‹è¯•ç»“æœ</h4>
                    <div id="test-log" style="font-family: monospace; font-size: 12px; max-height: 200px; overflow-y: auto;">
                        ç­‰å¾…æµ‹è¯•...
                    </div>
                    <button id="clear-log-btn" style="margin-top: 10px; padding: 5px 10px; background: #ff6347; color: white; border: none; cursor: pointer;">æ¸…ç©ºæ—¥å¿—</button>
                </div>
            </section>
        </main>
    </div>

    <!-- è„šæœ¬åŠ è½½ -->
    <script src="js/config.js"></script>
    <script src="js/dataManager.js"></script>
    <script src="js/chatManager.js"></script>
    <script src="js/app.js"></script>

    <style>
        .test-mood-btn {
            margin: 5px;
            padding: 10px 15px;
            background: #98FB98;
            border: 3px solid #32CD32;
            color: #006400;
            font-family: 'Courier New', monospace;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .test-mood-btn:hover {
            transform: translateY(-2px);
            box-shadow: 2px 4px 0px #228B22;
        }
        
        .test-results {
            border-radius: 0;
        }
        
        #test-log {
            background: white;
            border: 1px solid #ccc;
            padding: 10px;
            white-space: pre-wrap;
        }
    </style>

    <script>
        let testApp;
        let logCount = 0;
        
        function addLog(message) {
            const logEl = document.getElementById('test-log');
            const timestamp = new Date().toLocaleTimeString();
            logCount++;
            logEl.textContent += `[${timestamp}] ${logCount}. ${message}\n`;
            logEl.scrollTop = logEl.scrollHeight;
        }
        
        document.addEventListener('DOMContentLoaded', async () => {
            addLog('åˆå§‹åŒ–æµ‹è¯•åº”ç”¨...');
            
            // åˆå§‹åŒ–åº”ç”¨
            testApp = new VirtualZooApp();
            
            // ç­‰å¾…åˆå§‹åŒ–å®Œæˆ
            await new Promise(resolve => {
                const checkInit = () => {
                    if (testApp.isInitialized) {
                        resolve();
                    } else {
                        setTimeout(checkInit, 100);
                    }
                };
                checkInit();
            });
            
            addLog('åº”ç”¨åˆå§‹åŒ–å®Œæˆ');
            
            // ç»‘å®šæµ‹è¯•æŒ‰é’®äº‹ä»¶
            document.querySelectorAll('.test-mood-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    const mood = btn.dataset.mood;
                    const moodInput = document.getElementById('mood-description');
                    
                    addLog(`æµ‹è¯•å¿ƒæƒ…: "${mood}"`);
                    
                    moodInput.value = mood;
                    testApp.analyzeMoodDescription();
                    
                    // ç›‘å¬åˆ†æç»“æœ
                    setTimeout(() => {
                        const selectedBtn = document.querySelector('.weather-btn.selected');
                        if (selectedBtn) {
                            const weather = selectedBtn.dataset.weather;
                            addLog(`åˆ†æç»“æœ: ${weather} (${selectedBtn.textContent})`);
                        }
                    }, 2000);
                });
            });
            
            // æ¸…ç©ºæ—¥å¿—æŒ‰é’®
            document.getElementById('clear-log-btn').addEventListener('click', () => {
                document.getElementById('test-log').textContent = '';
                logCount = 0;
                addLog('æ—¥å¿—å·²æ¸…ç©º');
            });
            
            // ç›‘å¬å¤©æ°”æŒ‰é’®ç‚¹å‡»
            document.querySelectorAll('.weather-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    const weather = btn.dataset.weather;
                    addLog(`æ‰‹åŠ¨é€‰æ‹©å¤©æ°”: ${weather} (${btn.textContent})`);
                });
            });
            
            addLog('æµ‹è¯•é¡µé¢å‡†å¤‡å°±ç»ªï¼');
        });
    </script>
</body>
</html>
</text>